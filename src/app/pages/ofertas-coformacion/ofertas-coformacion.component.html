<main class="main-content">
  <div class="container">
    <div class="header-section">
      <button class="home-button" (click)="volverAlHome()" title="Volver al Home">
        â† Volver al Home
      </button>
      <h2 class="titulo">Ofertas Recomendadas</h2>
      <button class="refresh-button" (click)="refrescarRecomendaciones()" title="Refrescar ofertas">
        ğŸ”„ Refrescar
      </button>
    </div>

    <!-- Loading indicator -->
    <div *ngIf="loading" class="loading-container">
      <p>â³ Cargando ofertas recomendadas...</p>
    </div>

    <!-- Error message -->
    <div *ngIf="error" class="error-container">
      <p class="error-text">âŒ {{ error }}</p>
      <button (click)="refrescarRecomendaciones()" class="retry-button">
        Reintentar
      </button>
    </div>

    <!-- InformaciÃ³n del estudiante -->
    <div *ngIf="!loading && !error && estudianteId" class="info-section">
      <p class="info-text">
        ğŸ“‹ Mostrando ofertas compatibles para estudiantes del programa (Estudiante de referencia ID: {{ estudianteId }})
      </p>
    </div>
    
    <!-- InformaciÃ³n para coformaciÃ³n -->
    <div *ngIf="!loading && !error && !estudianteId" class="info-section">
      <p class="info-text">
        ğŸ“‹ Mostrando todas las ofertas recomendadas con estudiantes compatibles
      </p>
    </div>

    <!-- Tabla de resultados -->
    <div class="table-container" *ngIf="!loading && !error">
      <table class="companies-table">
        <thead>
          <tr>
            <th>ID</th>
            <th>DescripciÃ³n</th>
            <th>Modalidad</th>
            <th>Empresa</th>
            <th>Programa</th>
            <th>Estudiante Recomendado</th>
            <th>Acciones</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let oferta of recomendaciones">
            <td>{{ oferta.idOferta || oferta.oferta_id || oferta.id }}</td>
            <td>{{ oferta.descripcion }}</td>
            <td>{{ oferta.modalidad }}</td>
            <td>{{ oferta.empresa_nombre }}</td>
            <td>{{ oferta.programa_nombre || oferta.programa_id }}</td>
            <td>
              <span [class]="oferta.estudiante === 'Sin asignar' || oferta.estudiante === 'Sin estudiantes compatibles' ? 'sin-asignar' : 'estudiante-asignado'">
                {{ oferta.estudiante || 'Sin asignar' }}
              </span>
            </td>
            <td><button class="details-button">Ver mÃ¡s</button></td>
          </tr>
          <tr *ngIf="recomendaciones.length === 0">
            <td colspan="7" class="no-results">
              ğŸ“ No hay ofertas recomendadas actualmente para este programa.
              <br><small>AsegÃºrese de que existan ofertas publicadas para su programa acadÃ©mico.</small>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</main>
